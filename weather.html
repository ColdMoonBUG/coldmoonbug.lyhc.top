<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #e0f7fa;
            margin: 0;
            padding: 20px;
            color: #333;
            transition: background-color 0.5s ease;
        }

        h1 {
            text-align: center;
            color: #00796b;
            margin-bottom: 20px;
        }

        .weather-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin: 10px auto;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 600px;
            transition: transform 0.3s ease;
            flex-direction: row;
        }

        .weather-card:hover {
            transform: scale(1.02);
        }

        .date {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .type {
            font-size: 18px;
            color: #f57c00;
            display: flex;
            align-items: center;
        }

        .temp {
            font-size: 24px;
            color: #0288d1;
            font-weight: bold;
        }

        .icon {
            width: 50px;
            margin-left: 10px;
        }

        .air-quality {
            margin-top: 20px;
            font-size: 16px;
            color: #c2185b;
            text-align: center;
        }

        @media (max-width: 600px) {
            .weather-card {
                flex-direction: column;
                align-items: flex-start;
            }

            .date,
            .type,
            .temp {
                text-align: left;
            }
        }


        .header {
            position: relative;
            text-align: center;
            background: linear-gradient(60deg, rgba(84, 58, 183, 1) 0%, rgba(0, 172, 193, 1) 100%);
            /* 	background: #FFAFBD;  
	background: -webkit-linear-gradient(to right, #ffc3a0, #FFAFBD);  
	background: linear-gradient(to right, #ffc3a0, #FFAFBD); 
 */
            color: 00c6ff;
        }


        .inner-header {
            height: 65vh;
            width: 100%;
            margin: 0;
            padding: 0;
        }



        .waves {
            position: relative;
            width: 100vw;
            /* 自适应宽度 */
            height: 15vh;
            min-height: 100px;
            max-height: 150px;
        }

        .inner-header {
            height: 65vh;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Animation */
        .parallax>use {
            animation: move-forever 5s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;
        }

        .parallax>use:nth-child(1) {
            animation-duration: 5s;
            /* 更短的时间以加快速度 */
        }

        .parallax>use:nth-child(2) {
            animation-duration: 7s;
        }

        .parallax>use:nth-child(3) {
            animation-duration: 9s;
        }

        .parallax>use:nth-child(4) {
            animation-duration: 12s;
        }

        @keyframes move-forever {
            0% {
                transform: translate3d(-90px, 0, 0);
            }

            100% {
                transform: translate3d(85px, 0, 0);
            }
        }

        /* Shrinking for mobile */
        @media (max-width: 768px) {
            .waves {
                height: 40px;
                min-height: 40px;
            }

            .content {
                height: 30vh;
            }

            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>

<body>
    <h1></h1>
    <div id="weather-container"></div>
    <div class="header">
    </div>
    <div>
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
            <defs>
                <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
            </defs>
            <g class="parallax">
                <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(224,233,239,0.7" />
                <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(224,233,239,0.5)" />
                <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(224,233,239,0.3)" />
                <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
            </g>
        </svg>
    </div>
    </div>
    <script>
        function getUrlParams() {
            var params = {};
            var parts = window.location.search.substr(1).split('&');
            for (var i = 0; i < parts.length; i++) {
                var keyValuePair = parts[i].split('=');
                var key = decodeURIComponent(keyValuePair[0]);
                var value = decodeURIComponent(keyValuePair[1]);
                params[key] = value;
            }
            return params;
        }
        async function fetchWeatherData(city) {
            const response = await fetch(`https://api.vvhan.com/api/weather?city=${city}&type=week`);
            return await response.json();
        }

        function getWeatherIcon(type) {
            const icons = {
                "晴": "https://img.icons8.com/ios-filled/50/000000/sun.png",
                "多云": "https://img.icons8.com/ios-filled/50/000000/cloud.png",
                "阴": "https://img.icons8.com/ios-filled/50/000000/cloud.png",
                "中雨": "https://img.icons8.com/ios-filled/50/000000/rain.png",
                "小雨": "https://img.icons8.com/ios-filled/50/000000/rain.png",
                "大雨": "https://img.icons8.com/ios-filled/50/000000/heavy-rain.png",
                "暴雨": "https://img.icons8.com/ios-filled/50/000000/storm.png",
                "雪": "https://img.icons8.com/ios-filled/50/000000/snow.png",
                "霾": "https://img.icons8.com/ios-filled/50/000000/haze.png"
                // 可以继续添加其他天气类型的图标
            };
            return icons[type] || "https://img.icons8.com/ios-filled/50/000000/sun.png"; // 默认图标
        }

        function displayWeather(data) {
            const container = document.getElementById('weather-container');
            data.data.forEach(day => {
                const card = document.createElement('div');
                card.className = 'weather-card';
                card.innerHTML = `
                    <div>
                        <div class="date">${day.date} (${day.week})</div>
                        <div class="type">
                            ${day.type} <img src="${getWeatherIcon(day.type)}" class="icon" alt="${day.type}">
                        </div>
                    </div>
                    <div class="temp">白天: ${day.low} ~ ${day.high}</div>
                `;
                container.appendChild(card);
            });
            const airQuality = document.createElement('div');
            airQuality.className = 'air-quality';
            airQuality.innerHTML = `空气质量: ${data.air.aqi_name} (AQI: ${data.air.aqi})`;
            container.appendChild(airQuality);
        }

        async function init() {
            const params = getUrlParams();
            if (params.city) {
                const weatherData = await fetchWeatherData(params.city);
                displayWeather(weatherData);
                document.title = `${params.city}未来一周天气`;
                const cityName = params.city || '郑州'; // 获取城市名称，如果没有则默认为郑州
                document.querySelector('h1').textContent = `${cityName}未来一周天气`; // 修改h1标签的文本内容

            } else {
                params.city = '郑州';
                const weatherData = await fetchWeatherData(params.city);
                displayWeather(weatherData);
                document.title = `${params.city}未来一周天气`;
            }
        }

        init();

    </script>
</body>

</html>